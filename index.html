<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mealify AI</title>
    <style>
        body {
            font-family: 'Karla', sans-serif;
            text-align: center;
            background-color: #f3e5f5; /* Updated color */
            color: #000;
        }
        h1 {
            margin: 20px 0;
            font-size: 24px;
            color: #ffffff;
        }
        h2 {
            margin-top: 20px;
            font-size: 18px;
            color: #000;
        }
        .category-container {
            margin: 20px 0;
        }
        .button-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 15px;
            justify-items: center;
            margin: 0 auto;
            max-width: 1000px;
        }
        .food-button {
            display: inline-block;
            width: 200px;
            height: 200px;
            cursor: pointer;
            text-align: center;
        }
        .food-button img {
            width: 100%;
            height: 100%;
        }
        .typing-box {
            width: 80%;
            max-width: 400px;
            height: 80px;
            margin: 20px auto;
            padding: 10px;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 16px;
            resize: none;
            display: inline-block;
            vertical-align: top;
            background-color: rgba(255, 255, 255, 0.7);
        }
        .submit-button {
            height: 80px;
            width: 120px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.7);
            color: #000;
            border: 2px solid #000;
            border-radius: 5px;
            margin-left: -4px;
            display: inline-block;
            vertical-align: top;
        }
        .submit-button span {
            display: block;
            line-height: 40px;
        }
        .response-box {
            width: 80%;
            max-width: 400px;
            height: 200px;
            margin: 20px auto;
            padding: 10px;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 16px;
            overflow: auto;
            word-wrap: break-word;
            background-color: rgba(255, 255, 255, 0.7);
        }
        .video-container {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 300px;
        }
        .text-container {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 300px;
            text-align: left;
            color: #000;
        }
    </style>
</head>
<body>
    <h1>Mealify AI</h1>
    <p>Hey you! Choose your kid's favorites and I will create 3 recipes for you that your kid will love!</p>

    <div class="video-container">
        <video width="300" controls>
            <source src="images1/show_my_recipes.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="text-container">
        <p>Choose the ingredients below to get recipe suggestions your kid will love! Simply click the buttons for veggies, sides, and proteins, and hit "Show me GO!" to get your customized recipes!</p>
    </div>

    <!-- Ingredients Section -->
    <div class="category-container">
        <div class="button-container">
            <!-- Veggies -->
            <div class="food-button" data-food="Asparagus">
                <img src="images1/Asparagus.png" alt="Asparagus">
            </div>
            <div class="food-button" data-food="Green beans">
                <img src="images1/Green_beans.png" alt="Green beans">
            </div>
            <div class="food-button" data-food="Broccoli">
                <img src="images1/Broccoli.png" alt="Broccoli">
            </div>
            <div class="food-button" data-food="Tomatoes">
                <img src="images1/Tomatoes.png" alt="Tomatoes">
            </div>
            <div class="food-button" data-food="Bell Peppers">
                <img src="images1/Bell_Peppers.png" alt="Bell Peppers">
            </div>
            <div class="food-button" data-food="Carrots">
                <img src="images1/Carrots.png" alt="Carrots">
            </div>
            <div class="food-button" data-food="Cauliflower">
                <img src="images1/Cauliflower.png" alt="Cauliflower">
            </div>
            <div class="food-button" data-food="Celery">
                <img src="images1/Celery.png" alt="Celery">
            </div>
            <!-- (Add all the other veggies, sides, and proteins similarly) -->
        </div>
    </div>

    <div style="display: flex; justify-content: center; align-items: center;">
        <textarea class="typing-box" id="typingBox" readonly>Tonight's inspiration with 3 kids proof recipes based on:</textarea>
        <button class="submit-button" onclick="generatePrompt()">
            <span>Show my</span>
            <span>recipes</span>
        </button>
    </div>

    <div id="response" class="response-box">Your recipes will appear here...</div>

    <script>
        const selectedFoods = [];

        document.querySelectorAll('.food-button').forEach(button => {
            button.addEventListener('click', () => {
                const foodItem = button.getAttribute('data-food');

                if (!selectedFoods.includes(foodItem)) {
                    selectedFoods.push(foodItem);

                    const typingBox = document.getElementById('typingBox');
                    typingBox.value = `Tonight's inspiration with 3 kids proof recipes based on: ${selectedFoods.join(', ')}`;
                }
            });
        });

        async function generatePrompt() {
            const prompt = document.getElementById('typingBox').value.trim() +
                " Please show me 3 recipes that are kid-proof and creative looks in a way that most children would love to eat it. With only their favorite ingredients inside.";

            const apiUrl = 'https://vercel-host-coral.vercel.app/api/generate';
            const responseDiv = document.getElementById('response');

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt }),
                });

                if (response.ok) {
                    const data = await response.json();
                    const aiResponse = data.choices[0]?.message?.content.trim();

                    responseDiv.innerHTML = `<strong>Recipe Suggestions:</strong><br>${aiResponse}`;
                } else {
                    throw new Error(`Server Error: ${response.status}`);
                }
            } catch (error) {
                responseDiv.innerHTML = `<strong>Error:</strong> Unable to fetch response. ${error.message}`;
            }
        }
    </script>
</body>
</html>
